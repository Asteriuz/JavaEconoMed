DROP TABLE CP1_CLIENTE CASCADE CONSTRAINTS;

DROP TABLE CP1_ENDERECO_CLIENTE CASCADE CONSTRAINTS;

DROP TABLE CP1_HISTORICO_SAUDE_CLIENTE CASCADE CONSTRAINTS;

DROP TABLE CP1_HISTORICO_HOSPITAL_CLIENTE CASCADE CONSTRAINTS;

DROP TABLE CP1_CONVENIO CASCADE CONSTRAINTS;

DROP TABLE CP1_EMPRESA CASCADE CONSTRAINTS;

DROP TABLE CP1_ENDERECO_EMPRESA CASCADE CONSTRAINTS;

DROP TABLE CP1_UNIDADE CASCADE CONSTRAINTS;

DROP TABLE CP1_ENDERECO_UNIDADE CASCADE CONSTRAINTS;

DROP TABLE CP1_MEDICO_UNIDADE CASCADE CONSTRAINTS;

DROP TABLE CP1_MEDICO CASCADE CONSTRAINTS;

CREATE TABLE CP1_CLIENTE (
    ID NUMBER PRIMARY KEY,
    RG VARCHAR(20),
    NOME VARCHAR(100),
    TELEFONE VARCHAR(20),
    EMAIL VARCHAR(100),
    DATA_NASCIMENTO DATE,
    CPF VARCHAR(20),
    ESTADO_CIVIL VARCHAR(20),
    TEM_CONVENIO CHAR(1)
);

CREATE TABLE CP1_ENDERECO_CLIENTE (
    ID NUMBER PRIMARY KEY,
    CLIENTE_ID NUMBER,
    RUA VARCHAR(100),
    NUMERO VARCHAR(10),
    CIDADE VARCHAR(100),
    ESTADO VARCHAR(100),
    CEP VARCHAR(20),
    FOREIGN KEY (CLIENTE_ID) REFERENCES CP1_CLIENTE(ID)
);

CREATE TABLE CP1_HISTORICO_SAUDE_CLIENTE (
    ID NUMBER PRIMARY KEY,
    CLIENTE_ID NUMBER,
    DATA_REGISTRO DATE,
    FUMO VARCHAR(20),
    DOENCA_PRINCIPAL VARCHAR(100),
    HISTORICO_FAMILIAR VARCHAR(100),
    ALERGIAS VARCHAR(100),
    OBSERVACOES VARCHAR(100),
    FOREIGN KEY (CLIENTE_ID) REFERENCES CP1_CLIENTE(ID)
);

CREATE TABLE CP1_HISTORICO_HOSPITAL_CLIENTE (
    ID NUMBER PRIMARY KEY,
    CLIENTE_ID NUMBER,
    DATA_REGISTRO DATE,
    HISTORICO_MEDICO VARCHAR(100),
    EXAMES_REALIZADOS VARCHAR(100),
    MEDICAMENTOS_PRESCRITOS VARCHAR(100),
    OBSERVACOES VARCHAR(100),
    FOREIGN KEY (CLIENTE_ID) REFERENCES CP1_CLIENTE(ID)
);

CREATE TABLE CP1_CONVENIO (
    ID NUMBER PRIMARY KEY,
    CLIENTE_ID NUMBER,
    NOME VARCHAR(100),
    VALOR NUMBER,
    TIPO_SERVICO VARCHAR(100),
    COBERTURA VARCHAR(100),
    CONTATO VARCHAR(100),
    VALIDADE DATE,
    FOREIGN KEY (CLIENTE_ID) REFERENCES CP1_CLIENTE(ID)
);

CREATE TABLE CP1_EMPRESA (
    ID NUMBER PRIMARY KEY,
    CNPJ VARCHAR(20),
    NOME VARCHAR(100),
    TIPO VARCHAR(100),
    TELEFONE VARCHAR(20),
    EMAIL VARCHAR(100),
    AREA_ATUACAO VARCHAR(100)
);

CREATE TABLE CP1_ENDERECO_EMPRESA (
    ID NUMBER PRIMARY KEY,
    EMPRESA_ID NUMBER,
    RUA VARCHAR(100),
    NUMERO VARCHAR(10),
    CIDADE VARCHAR(100),
    ESTADO VARCHAR(100),
    CEP VARCHAR(20),
    FOREIGN KEY (EMPRESA_ID) REFERENCES CP1_EMPRESA(ID)
);

CREATE TABLE CP1_UNIDADE (
    ID NUMBER PRIMARY KEY,
    EMPRESA_ID NUMBER,
    NOME VARCHAR(100),
    TELEFONE VARCHAR(20),
    EMAIL VARCHAR(100),
    TIPO VARCHAR(100),
    CAPACIDADE NUMBER,
    ESPECIALIDADES VARCHAR(100),
    FOREIGN KEY (EMPRESA_ID) REFERENCES CP1_EMPRESA(ID)
);

CREATE TABLE CP1_ENDERECO_UNIDADE (
    ID NUMBER PRIMARY KEY,
    UNIDADE_ID NUMBER,
    RUA VARCHAR(100),
    NUMERO VARCHAR(10),
    CIDADE VARCHAR(100),
    ESTADO VARCHAR(100),
    CEP VARCHAR(20),
    FOREIGN KEY (UNIDADE_ID) REFERENCES CP1_UNIDADE(ID)
);

CREATE TABLE CP1_MEDICO (
    ID NUMBER PRIMARY KEY,
    NOME VARCHAR(100),
    TELEFONE VARCHAR(20),
    EMAIL VARCHAR(100),
    ESPECIALIDADE VARCHAR(100),
    CRM VARCHAR(20)
);

CREATE TABLE CP1_MEDICO_UNIDADE (
    ID NUMBER PRIMARY KEY,
    MEDICO_ID NUMBER,
    UNIDADE_ID NUMBER,
    HORARIO_ATENDIMENTO VARCHAR(100),
    FOREIGN KEY (MEDICO_ID) REFERENCES CP1_MEDICO(ID),
    FOREIGN KEY (UNIDADE_ID) REFERENCES CP1_UNIDADE(ID)
);

-- Inserções para a tabela CLIENTE
INSERT INTO CP1_CLIENTE (ID, RG, NOME, TELEFONE, EMAIL, DATA_NASCIMENTO, CPF, ESTADO_CIVIL, TEM_CONVENIO)
VALUES (1, '123456789', 'João da Silva', '11223344', 'joao.silva@email.com', TO_DATE('1990-01-01', 'YYYY-MM-DD'), '123.456.789-00', 'Solteiro', 'S');
INSERT INTO CP1_CLIENTE (ID, RG, NOME, TELEFONE, EMAIL, DATA_NASCIMENTO, CPF, ESTADO_CIVIL, TEM_CONVENIO)
VALUES (2, '987654321', 'Maria Souza', '55443322', 'maria.souza@email.com', TO_DATE('1985-05-10', 'YYYY-MM-DD'), '987.654.321-00', 'Casada', 'S');

-- Inserções para a tabela ENDERECO_CLIENTE
INSERT INTO CP1_ENDERECO_CLIENTE (ID, CLIENTE_ID, RUA, NUMERO, CIDADE, ESTADO, CEP)
VALUES (1, 1, 'Rua dos Clientes', '123', 'Cidade Cliente', 'Estado Cliente', '12345-678');
INSERT INTO CP1_ENDERECO_CLIENTE (ID, CLIENTE_ID, RUA, NUMERO, CIDADE, ESTADO, CEP)
VALUES (2, 2, 'Avenida das Flores', '456', 'Cidade dos Clientes', 'Estado dos Clientes', '54321-098');

INSERT INTO CP1_HISTORICO_SAUDE_CLIENTE (ID, CLIENTE_ID, DATA_REGISTRO, FUMO, DOENCA_PRINCIPAL, HISTORICO_FAMILIAR, ALERGIAS, OBSERVACOES)
VALUES (1, 1, TO_DATE('2020-01-01', 'YYYY-MM-DD'), 'Nunca fumou', 'Hipertensão', 'Nenhum histórico relevante', 'Nenhuma alergia conhecida', 'Sem observações');
INSERT INTO CP1_HISTORICO_SAUDE_CLIENTE (ID, CLIENTE_ID, DATA_REGISTRO, FUMO, DOENCA_PRINCIPAL, HISTORICO_FAMILIAR, ALERGIAS, OBSERVACOES)
VALUES (2, 2, TO_DATE('2021-03-15', 'YYYY-MM-DD'), 'Fumante', 'Diabetes', 'Histórico de hipertensão', 'Nenhuma alergia conhecida', 'Sem observações');

INSERT INTO CP1_HISTORICO_HOSPITAL_CLIENTE (ID, CLIENTE_ID, DATA_REGISTRO, HISTORICO_MEDICO, EXAMES_REALIZADOS, MEDICAMENTOS_PRESCRITOS, OBSERVACOES)
VALUES (1, 1, TO_DATE('2022-01-01', 'YYYY-MM-DD'), 'Cirurgia de apendicite em 2015', 'Exames de rotina', 'Paracetamol', 'Nenhuma observação');
INSERT INTO CP1_HISTORICO_HOSPITAL_CLIENTE (ID, CLIENTE_ID, DATA_REGISTRO, HISTORICO_MEDICO, EXAMES_REALIZADOS, MEDICAMENTOS_PRESCRITOS, OBSERVACOES)
VALUES (2, 2, TO_DATE('2023-07-20', 'YYYY-MM-DD'), 'Internação por pneumonia', 'Exames de sangue', 'Antibióticos', 'Nenhuma observação');

INSERT INTO CP1_CONVENIO (ID, CLIENTE_ID, NOME, VALOR, TIPO_SERVICO, COBERTURA, CONTATO, VALIDADE)
VALUES (1, 1, 'Convenio A', 500.00, 'Consulta Médica', 'Consultas e exames básicos', 'contato@convenioa.com', TO_DATE('2025-12-31', 'YYYY-MM-DD'));
INSERT INTO CP1_CONVENIO (ID, CLIENTE_ID, NOME, VALOR, TIPO_SERVICO, COBERTURA, CONTATO, VALIDADE)
VALUES (2, 2, 'Convenio B', 800.00, 'Consulta e Exames', 'Consultas, exames básicos e especializados', 'contato@conveniob.com', TO_DATE('2026-06-30', 'YYYY-MM-DD'));

INSERT INTO CP1_EMPRESA (ID, CNPJ, NOME, TIPO, TELEFONE, EMAIL, AREA_ATUACAO)
VALUES (1, '12345678901234', 'Empresa X', 'Saúde', '11223344', 'empresa.x@email.com', 'Atendimento médico');
INSERT INTO CP1_EMPRESA (ID, CNPJ, NOME, TIPO, TELEFONE, EMAIL, AREA_ATUACAO)
VALUES (2, '98765432109876', 'Empresa Y', 'Saúde', '55443322', 'empresa.y@email.com', 'Atendimento médico geral');

INSERT INTO CP1_ENDERECO_EMPRESA (ID, EMPRESA_ID, RUA, NUMERO, CIDADE, ESTADO, CEP)
VALUES (1, 1, 'Rua da Empresa X', '456', 'Cidade Empresa', 'Estado Empresa', '98765-432');
INSERT INTO CP1_ENDERECO_EMPRESA (ID, EMPRESA_ID, RUA, NUMERO, CIDADE, ESTADO, CEP)
VALUES (2, 2, 'Rua da Empresa Y', '789', 'Cidade Empresa Y', 'Estado Empresa Y', '12345-678');


INSERT INTO CP1_UNIDADE (ID, EMPRESA_ID, NOME, TELEFONE, EMAIL, TIPO, CAPACIDADE, ESPECIALIDADES)
VALUES (1, 1, 'Unidade A', '11223344', 'unidade.a@email.com', 'Hospital', 100, 'Cardiologia, Ortopedia');
INSERT INTO CP1_UNIDADE (ID, EMPRESA_ID, NOME, TELEFONE, EMAIL, TIPO, CAPACIDADE, ESPECIALIDADES)
VALUES (2, 2, 'Unidade B', '55443322', 'unidade.b@email.com', 'Hospital', 150, 'Clínica geral');

INSERT INTO CP1_ENDERECO_UNIDADE (ID, UNIDADE_ID, RUA, NUMERO, CIDADE, ESTADO, CEP)
VALUES (1, 1, 'Rua da Unidade A', '789', 'Cidade Unidade', 'Estado Unidade', '54321-098');
INSERT INTO CP1_ENDERECO_UNIDADE (ID, UNIDADE_ID, RUA, NUMERO, CIDADE, ESTADO, CEP)
VALUES (2, 2, 'Rua da Unidade B', '101', 'Cidade Unidade B', 'Estado Unidade B', '98765-432');


INSERT INTO CP1_MEDICO (ID, NOME, TELEFONE, EMAIL, ESPECIALIDADE, CRM)
VALUES (1, 'Dr. José Santos', '11223344', 'jose.santos@email.com', 'Cardiologia', '12345');
INSERT INTO CP1_MEDICO (ID, NOME, TELEFONE, EMAIL, ESPECIALIDADE, CRM)
VALUES (2, 'Dra. Ana Oliveira', '55443322', 'ana.oliveira@email.com', 'Clínica Geral', '54321');

INSERT INTO CP1_MEDICO_UNIDADE (ID, MEDICO_ID, UNIDADE_ID, HORARIO_ATENDIMENTO)
VALUES (1, 1, 1, 'Segunda a Sexta, 08:00 - 17:00');
INSERT INTO CP1_MEDICO_UNIDADE (ID, MEDICO_ID, UNIDADE_ID, HORARIO_ATENDIMENTO)
VALUES (2, 2, 2, 'Segunda a Sexta, 09:00 - 18:00');


SELECT * FROM CP1_CLIENTE;

SELECT c.nome, co.nome FROM CP1_CLIENTE c JOIN CP1_CONVENIO co ON c.id = co.cliente_id;